<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>æ•´ç†åˆ¸ç™ºåˆ¸</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 2rem auto; padding: 0 1rem; }
        .card { border: 1px solid #ddd; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; text-align: center; }
        button { padding: 0.8rem 2rem; cursor: pointer; font-size: 1.2rem; background: #2196F3; color: white; border: none; border-radius: 4px; }
        input { font-size: 1.2rem; padding: 0.5rem; width: 60px; text-align: center; }
    </style>
</head>
<body>
    <p><a href="/admin">â† ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹</a></p>
    <h1>ğŸ« ç™ºåˆ¸ç”»é¢</h1>

    <!-- ç™ºåˆ¸ãƒ•ã‚©ãƒ¼ãƒ  -->
    <div class="card">
        <h2>æ–°è¦ç™ºåˆ¸</h2>
        <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å…ˆã‚’å¤‰æ›´ -->
        <form action="/admin/front/tickets" method="post">
            <label>
                äººæ•°:
                <input type="number" name="group_size" value="1" min="1" required> å
            </label>
            <br><br>
            <button type="submit">ç™ºåˆ¸ã™ã‚‹</button>
        </form>
    </div>

    <!-- ç›´è¿‘ã®ç™ºåˆ¸çµæœã®ã¿è¡¨ç¤º -->
    {% if let Some(ticket) = last_ticket %}
    <div class="card" style="background-color: #e0f7fa;">
        <h3>ç™ºåˆ¸å®Œäº†ï¼</h3>
        <p>æ•´ç†ç•ªå·: <strong style="font-size: 2rem;">{{ ticket.number }}</strong></p>
        <p>äººæ•°: {{ ticket.group_size }}å</p>
        
        {% if let Some(qr) = qr_code %}
            <div style="text-align: center; margin-top: 10px;">
                <p>â†“ ãŠå®¢æ§˜ã«èª­ã¿å–ã£ã¦ã‚‚ã‚‰ã£ã¦ãã ã•ã„ â†“</p>
                <div style="background: white; padding: 10px; display: inline-block;">
                    <style> svg { width: 200px; height: 200px; } </style>
                    {{ qr|safe }}
                </div>
                <!-- ç¢ºèªç”¨ãƒªãƒ³ã‚¯ -->
                <p><a href="/guest/{{ ticket.id }}" target="_blank">ç”»é¢ç¢ºèª</a></p>
            </div>
        {% endif %}
    </div>
    {% endif %}
</body>
</html>
